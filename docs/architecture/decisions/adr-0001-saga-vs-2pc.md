# ADR-0001: Сага (двухшаговая согласованность) вместо 2PC

## Контекст

ТЗ требует последовательность локальных транзакций и компенсацию при сбое.

## Решение

Используем сага-подход:

1) BS: локальная транзакция — `Booking{PENDING}`
2) HMS: `confirm-availability` — временная блокировка (HELD)
3) На успех: `Booking→CONFIRMED` (и учёт `times_booked`)
4) На сбой/тайм-аут: `release` и `Booking→CANCELLED`

## Обоснование

- Соответствует ТЗ (без глобальных распределённых транзакций)
- Проще для учебного проекта
- Чёткая компенсация

## Последствия

- Требуется идемпотентность и ретраи на межсервисных вызовах.
