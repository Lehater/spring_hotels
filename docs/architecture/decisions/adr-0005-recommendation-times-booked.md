# ADR-0005: Рекомендации по times_booked

## Контекст

ТЗ: HMS ведёт счётчик, BS запрашивает рекомендации; сортировка `(times_booked ASC, id ASC)`.

## Решение

- HMS хранит `rooms.times_booked`.
- При успешном подтверждении доступности (hold) — `times_booked++`.
- При компенсации `release` — `times_booked--` (если ранее был плюс по тому же requestId).
- Рекомендации: фильтр свободных + сортировка `(times_booked, id)`.

## Последствия

- Детерминированный автоподбор (равномерная загрузка).
- Идемпотентность изменения счётчика завязана на `requestId`.
